<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/favicon.png" />

    <title>Rollup code-splitting demo</title>

    <link rel="stylesheet" href="styles.css" />
    <script src="/currentExecutingScript/currentExecutingScript.js"></script>
    <script src="/systemjs/s.js"></script>
    <!-- <script src="/systemjs/extras/named-register.js"></script> -->
    <script src="/federationjs/dist/federation-js.js"></script>

    <script src="/react/dist/plugin-entry.js"></script>
    <script src="/react-b/dist/plugin-entry.js"></script>

    <script>
      (async function () {
        console.log("importing plugin containers");
        const [a, b] = await Promise.all([
          System.import("__mf_container_plugin_1"),
          System.import("__mf_container_plugin_2"),
        ]);

        a.init();
        b.init();
      })();
    </script>
    <script src="/react/dist/main-a.js"></script>
    <script src="/react-b/dist/main-a.js"></script>
    <!-- <script src="/react/dist/all.js"></script> -->

    <script>
      //   fetch("/react/dist/plugin-entry.js")
      //     .then(function (response) {
      //       if (!response.ok) {
      //         return false;
      //       }
      //       return response.blob();
      //     })
      //     .then(function (myBlob) {
      //       var objectURL = URL.createObjectURL(myBlob);
      //       var sc = document.createElement("script");
      //       sc.setAttribute("src", objectURL);
      //       sc.setAttribute("type", "text/javascript");
      //       document.head.appendChild(sc);
      //     });
    </script>
  </head>
  <body>
    <h1>Rollup code-splitting demo</h1>

    <p>
      <a href="https://github.com/rollup/rollup-starter-code-splitting"
        >See the source code on GitHub</a
      >
    </p>

    <div id="a">
      <div data-used-by="a"></div>
      <div data-used-by="both"></div>
    </div>

    <div id="b">
      <div data-used-by="b"></div>
      <div data-used-by="both"></div>
    </div>
  </body>
</html>
